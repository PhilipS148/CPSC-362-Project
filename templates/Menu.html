<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tuffy Tacos</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/tuffytaco.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='CSSFiles/Menu.css') }}">

</head>

<body>
    <header>
    <div class="header-grid">
        <a href="{{ url_for('index') }}">
            <img id="tuffy" src="{{ url_for('static', filename='images/tuffytaco.png') }}" height="80" width="80" alt="TuffyTacos">
        </a>
        <h1>Tuffy Tacos - Menu</h1>

        <div class="header-links">
            <a href="{{ url_for('index') }}">Return to homepage</a>
            <a href="{{ url_for('cart') }}">View Cart</a>
        </div>
    </div>
    </header>

    <main>
        <div id="menu-container"></div>
    </main>

    <script type="module">
        function displayMenuJSON(jsonData) {
            let grid = '<div class="menu-grid">';

            jsonData["menu_list"].forEach(row => {
                grid += '<div class="item-box">';
                grid += `<h2>${row["name"]}</h2>`;
                grid += `<p>Price: $${row["price"]}</p>`;
                grid += `<button name="cart_add" type="submit" value="${row["idNum"]}">Add to Cart</button>`;
                grid += '</div>';
            });

            grid += '</div>';

            document.getElementById('menu-container').innerHTML = grid;
        }

        fetch("{{ url_for('static', filename='menuLists.json') }}")
            .then(response => {
                if (!response.ok) {
                    throw new Error('Menu file not found');
                }
                return response.json();
            })
            .then(menuList => displayMenuJSON(menuList))
            .catch(error => {
                console.error('Error loading menu:', error);
                document.getElementById('menu-container').innerHTML = 
                    '<p style="color: red; text-align: center;">Error loading menu. Check console for details.</p>';
            });
    </script>
</body>