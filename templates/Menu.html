<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tuffy Tacos</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/tuffytaco.png') }}" class="headicon">
    <link rel="stylesheet" href="{{ url_for('static', filename='CSSFiles/Menu.css') }}">

</head>







    <header>
    <div class="header-grid">
        <a href="{{ url_for('index') }}">
            <img id="tuffy" src="{{ url_for('static', filename='images/tuffytaco.png') }}" height="80" width="80" alt="TuffyTacos">
        </a>
        <h1>Tuffy Tacos - Menu</h1>

        <div class="header-links">
            
            <a href="{{ url_for('cart') }}">View Cart</a>
            <a href="{{ url_for('order_history') }}">View Order History</a>
            <a href="{{ url_for('index') }}">Return to homepage</a>
        </div>
    </div>
    </header>











 





<div class="main-layout">
    <main>
        <div id="menu-container"></div>
    </main>

    <div class="tuffy-Menu">
        <img src="{{ url_for('static', filename='images/tuffyMenu.png') }}">
    </div>
</div>





 
<script>



 
loadCart();

async function addToCart(idNum, name, price) {
    const response = await fetch("/api/add-to-cart", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            idNum: idNum,
            name: name,
            price: price * quantity,
            quantity: 1
        })
    });

    const data = await response.json();

    if (data.success) {
        loadCart();    
    }

    alert(data.message);
}
</script>









    <main>
        <div id="menu-container"></div>
    </main>

    <script>
    function displayMenuJSON(jsonData) {
        let grid = '<div class="menu-grid">';

        jsonData["menu_list"].forEach(row => {
            grid += `
                <div class="item-box">
                    <h2>${row.name}</h2>
                    <p>Price: $${row.price.toFixed(2)}</p>
                    <button class="add-btn" data-id="${row.idNum}">
                        Add to Cart
                    </button>
                </div>
            `;
        });

        grid += "</div>";
        document.getElementById("menu-container").innerHTML = grid;

         
        document.querySelectorAll(".add-btn").forEach(button => {
            button.addEventListener("click", async () => {
                const itemId = parseInt(button.dataset.id);

                const response = await fetch("/api/add-to-cart", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ item_id: itemId })
                });

                const data = await response.json();
               
            });
        });
    }

    fetch("{{ url_for('static', filename='menuLists.json') }}")
        .then(r => r.json())
        .then(displayMenuJSON);
</script>
 


 <script>document.addEventListener("click", function (e) {
    if (e.target.classList.contains("add-btn")) {
        const btn = e.target;

         
        if (btn.disabled) return;

         
        btn.disabled = true;
        const originalText = btn.innerText;
        btn.innerText = "Added!";
        btn.style.backgroundColor = "#4CAF50";  

         
        setTimeout(() => {
            btn.disabled = false;
            btn.innerText = originalText;
            btn.style.backgroundColor = "";  
        }, 2500);
    }
});</script>